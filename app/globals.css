@import "tailwindcss";

@plugin "tailwindcss-animate";
@plugin "@tailwindcss/typography";

@custom-variant dark (&:is(.dark *));

/* Theme configuration for Tailwind v4 */
@theme inline {
  /* Radius tokens */
  --radius: 0.625rem;
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  /* Typography - Zen-Modernist */
  --font-sans:
    var(--font-inter), ui-sans-serif, -apple-system, BlinkMacSystemFont,
    "Segoe UI", "Inter", "Roberta", sans-serif;
  --font-serif: "Lyon-Text", "Georgia", serif;
  --font-mono:
    var(--font-jetbrains), "SFMono-Regular", "Menlo", "JetBrains Mono",
    monospace;

  /* Color tokens - mapped to CSS variables */
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-brand: hsl(var(--brand));
  --color-brand-foreground: hsl(var(--brand-foreground));

  /* Sidebar colors */
  --color-sidebar: hsl(var(--sidebar));
  --color-sidebar-foreground: hsl(var(--sidebar-foreground));
  --color-sidebar-primary: hsl(var(--sidebar-primary));
  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));
  --color-sidebar-accent: hsl(var(--sidebar-accent));
  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));
  --color-sidebar-border: hsl(var(--sidebar-border));
  --color-sidebar-ring: hsl(var(--sidebar-ring));

  /* Animations */
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  /* Seijaku Physics - Energized Calm */
  /* The "Settled" Spring: Quick response, no bounce, immediate damping */
  --ease-seijaku: cubic-bezier(0.32, 0.72, 0, 1);

  /* Legacy Springs (kept for compatibility) */
  --ease-spring-s: cubic-bezier(0.2, 0.8, 0.2, 1);
  --ease-spring-m: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-spring-bouncy: cubic-bezier(0.175, 0.885, 0.32, 1.275);

  /* Framer Motion Constants (for JS animations) */
  /* Use these in motion components:
     transition={{ type: "spring", mass: 1, stiffness: 280, damping: 60 }}
     - mass: 1 (standard weight)
     - stiffness: 280 (quick response)
     - damping: 60 (heavy damping, no overshoot)
  */
}

@keyframes accordion-down {
  from {
    height: 0;
  }
  to {
    height: var(--radix-accordion-content-height);
  }
}

@keyframes accordion-up {
  from {
    height: var(--radix-accordion-content-height);
  }
  to {
    height: 0;
  }
}

/* Light mode variables - Zen-Modernist (Matte & Ink) */
:root {
  --background: 40 20% 99%; /* #FCFCFA - Warm Washi */
  --foreground: 0 0% 18%; /* #2E2E2E - Ink */
  --card: 40 20% 99%;
  --card-foreground: 0 0% 18%;
  --popover: 40 20% 99%;
  --popover-foreground: 0 0% 18%;
  --primary: 0 0% 18%; /* Ink for primary actions */
  --primary-foreground: 0 0% 100%;
  --secondary: 60 9% 96%; /* #F7F7F5 - Kept for sidebar */
  --secondary-foreground: 0 0% 18%;
  --muted: 60 9% 96%;
  --muted-foreground: 0 0% 46%; /* #757575 - Adjusted */
  --accent: 60 9% 96%;
  --accent-foreground: 0 0% 18%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;
  --border: 0 0% 80%; /* #CCCCCC - Significant increase for high visibility in Light Mode */
  --input: 0 0% 80%;
  --ring: 0 0% 18%;
  --brand: 220 44% 50%; /* #4B6CB7 - Kanso Blue */
  --brand-foreground: 0 0% 100%; /* White */
  --sidebar: 60 9% 96%;
  --sidebar-foreground: 0 0% 18%;
  --sidebar-primary: 220 44% 50%; /* Kanso Blue for active states */
  --sidebar-primary-foreground: 0 0% 100%;
  --sidebar-accent: 60 5% 91%;
  --sidebar-accent-foreground: 0 0% 18%;
  --sidebar-border: 60 5% 91%;
  --sidebar-ring: 0 0% 18%;
}

/* Dark mode variables - Zen-Modernist (Sumi Ink) */
.dark {
  --background: 0 0% 10%; /* #1A1A1A - Sumi Ink */
  --foreground: 0 0% 90%; /* #E5E5E5 - Lighter for contrast */
  --card: 0 0% 13%; /* #222222 - Charcoal */
  --card-foreground: 0 0% 90%;
  --popover: 0 0% 13%;
  --popover-foreground: 0 0% 90%;
  --primary: 0 0% 90%; /* Light Ink for dark mode */
  --primary-foreground: 0 0% 10%;
  --secondary: 0 0% 13%; /* #202020 */
  --secondary-foreground: 0 0% 90%;
  --muted: 0 0% 13%;
  --muted-foreground: 0 0% 63%; /* #A1A1A1 */
  --accent: 0 0% 13%;
  --accent-foreground: 0 0% 90%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 0% 98%;
  --border: 0 0% 26%; /* #424242 - Refined to 30% increase from original 20% */
  --input: 0 0% 26%;
  --ring: 0 0% 90%;
  --brand: 220 44% 50%; /* #4B6CB7 - Kanso Blue */
  --brand-foreground: 0 0% 100%; /* White */
  --sidebar: 0 0% 13%;
  --sidebar-foreground: 0 0% 90%;
  --sidebar-primary: 220 44% 50%; /* Kanso Blue for active states */
  --sidebar-primary-foreground: 0 0% 100%;
  --sidebar-accent: 0 0% 20%;
  --sidebar-accent-foreground: 0 0% 90%;
  --sidebar-border: 0 0% 20%;
  --sidebar-ring: 0 0% 90%;
}

/* Base layer styles */
@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Mobile optimizations & viewport constraint */
html,
body {
  height: 100dvh;
  overflow: hidden;
  overscroll-behavior: none;
}

* {
  -webkit-tap-highlight-color: transparent;
}

button,
[role="button"],
input[type="checkbox"],
input[type="radio"] {
  -webkit-user-select: none;
  user-select: none;
}

/* Vaul Drawer - Faster close animation for responsive back navigation */
[vaul-drawer] {
  transition: transform 120ms cubic-bezier(0.32, 0.72, 0, 1) !important;
}
[vaul-drawer][vaul-drawer-direction="bottom"] {
  transition: transform 120ms cubic-bezier(0.32, 0.72, 0, 1) !important;
}

input,
textarea,
select {
  font-size: 16px;
}

/* Zen-Modernist Typography - The Editorial Voice */
@layer utilities {
  /* H1 - Page Titles */
  .type-h1 {
    font-size: 28px;
    font-weight: 600;
    letter-spacing: -0.03em;
    line-height: 1.1;
  }

  @media (min-width: 768px) {
    .type-h1 {
      font-size: 32px;
    }
  }

  /* H2 - Section Headers */
  .type-h2 {
    font-size: 22px;
    font-weight: 600;
    letter-spacing: -0.02em;
    line-height: 1.2;
  }

  @media (min-width: 768px) {
    .type-h2 {
      font-size: 24px;
    }
  }

  /* H3 - Card Headers */
  .type-h3 {
    font-size: 18px;
    font-weight: 500;
    letter-spacing: -0.01em;
    line-height: 1.3;
  }

  /* Body - Primary Content */
  .type-body {
    font-size: 16px; /* Mobile-first: prevents iOS zoom */
    font-weight: 400;
    letter-spacing: normal;
    line-height: 1.5;
  }

  @media (min-width: 768px) {
    .type-body {
      font-size: 15px;
    }
  }

  /* UI/Label - Metadata, Tags */
  .type-ui {
    font-size: 13px;
    font-weight: 500;
    letter-spacing: 0.01em;
    line-height: 1;
  }

  /* Micro - Helpers, Footers */
  .type-micro {
    font-size: 11px;
    font-weight: 400;
    letter-spacing: 0.02em;
    line-height: 1;
  }

  /* Touch - Explicit 16px for inputs (mobile) */
  .type-touch {
    font-size: 16px !important;
  }

  /* Seijaku Transition - The "Settled" Feel */
  .transition-seijaku {
    transition-timing-function: var(--ease-seijaku);
    transition-duration: 300ms;
  }

  /* Seijaku variants for different durations */
  .transition-seijaku-fast {
    transition-timing-function: cubic-bezier(0.1, 1, 0.2, 1);
    transition-duration: 150ms;
  }

  .transition-seijaku-slow {
    transition-timing-function: var(--ease-seijaku);
    transition-duration: 500ms;
  }

  /* Ma (Negative Space) - Safe Area Utilities */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-right {
    padding-right: env(safe-area-inset-right);
  }

  /* Touch Targets - Minimum 44px for mobile */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
}

@layer utilities {
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .no-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
}
@layer utilities {
  .appearance-none {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
  }
  .mask-linear-horizontal {
    -webkit-mask-image: linear-gradient(to right, black 85%, transparent 100%);
    mask-image: linear-gradient(to right, black 85%, transparent 100%);
  }
}
@layer components {
  option {
    @apply bg-popover text-popover-foreground;
  }
}

@layer utilities {
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  ::-webkit-scrollbar-thumb {
    background: color-mix(
      in srgb,
      var(--color-muted-foreground),
      transparent 75%
    );
    border-radius: 10px;
    border: 1px solid transparent;
    background-clip: content-box;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: color-mix(
      in srgb,
      var(--color-muted-foreground),
      transparent 50%
    );
  }
  * {
    scrollbar-width: thin;
    scrollbar-color: color-mix(
        in srgb,
        var(--color-muted-foreground),
        transparent 75%
      )
      transparent;
  }

  /* Custom Scrollbar Utility */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: color-mix(
      in srgb,
      var(--color-muted-foreground),
      transparent 80%
    );
    border-radius: 10px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: color-mix(
      in srgb,
      var(--color-muted-foreground),
      transparent 60%
    );
  }

  /* Resizable panel collapse animation */
  [data-panel] {
    transition: flex-grow 300ms var(--ease-seijaku);
  }

  /* Scrollbar Management */
  .scrollbar-none {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }
  .scrollbar-none::-webkit-scrollbar {
    display: none; /* Chromium and Safari */
  }
}
